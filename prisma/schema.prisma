generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

enum StoryItemType {
  ACTION
  RESULT
}

model Experience {
  id           String           @id @default(uuid())
  period       String
  position     String
  company      String
  projectTitle String
  summary      String
  story        ExperienceStory?
  createdAt    DateTime         @default(now())
  updatedAt    DateTime         @updatedAt
}

model ExperienceStory {
  id           String                @id @default(uuid())
  problem      String
  experienceId String                @unique
  experience   Experience            @relation(fields: [experienceId], references: [id], onDelete: Cascade)
  items        ExperienceStoryItem[]
  createdAt    DateTime              @default(now())
  updatedAt    DateTime              @updatedAt
}

model ExperienceStoryItem {
  id      String          @id @default(uuid())
  type    StoryItemType
  text    String
  order   Int
  storyId String
  story   ExperienceStory @relation(fields: [storyId], references: [id], onDelete: Cascade)

  @@unique([storyId, type, order])
  @@index([storyId, type])
}

model SkillSection {
  id    String @id @default(uuid())
  slug  String @unique // e.g. "automation", "infra"
  title String
  order Int

  skills Skill[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Skill {
  id          String @id @default(uuid())
  title       String
  description String
  order       Int

  sectionId String
  section   SkillSection @relation(fields: [sectionId], references: [id], onDelete: Cascade)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@unique([sectionId, order])
  @@index([sectionId])
}

enum ToolIconKind {
  SVG_PATH
  SVG
  IMAGE_URL
}

model Tool {
  id       String       @id @default(uuid())
  title    String       @unique
  iconKind ToolIconKind @default(SVG_PATH)

  svgPath   String?
  svgMarkup String?
  imageUrl  String?

  color        String?
  needsWhiteBg Boolean @default(false)
  order        Int

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([order])
}
